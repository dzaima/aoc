#!/usr/bin/env cbqn
# iterates through compressed range points, sees which cube it intersected with last

âŸ¨RB, B10, Num, Ints, SInts, SplitâŸ© â† â€¢Import "../utils.bqn"
l â† {âŸ¨'n'=1âŠ‘ğ•© â‹„ <Ë˜â‰3â€¿2â¥ŠSIntsğ•©âŸ©}Â¨ â€¢FLines â‰ â—¶"../22.in"â€¿âŠ‘ â€¢args

Do â† { ğ•Šinp:
  on â† âŠ‘Â¨inp
  csâ€¿ce â† {<Ë˜â‰>ğ•©}Â¨ 0â€¿1+<Ë˜â‰>1âŠ‘Â¨inp
  u â† â·âˆ˜âˆ§Â¨ csâˆ¾Â¨ce

  mcs â† uâŠÂ¨cs
  mce â† uâŠÂ¨ce

  szxâ€¿szyâ€¿szz â† â‰ Â¨u
  zi â† â†•szz-1
  zw â† (1âŠ¸â†“-Â¯1âŠ¸â†“) 2âŠ‘u
  
  +Â´{ğ•Šxy:
    v â† /âˆ§Â´(ğ•©â‰¥2â†‘mcs)âˆ§ğ•©<2â†‘mce
    sâ€¿eâ€¿con â† vâŠ¸âŠÂ¨ (2âŠ‘Â¨mcsâ€¿mce)âˆ¾<on
    con â†© 0âˆ¾con
    sâ€¿eâŒ½Â¨â†©
    xyw â† Ã—Â´ ((1+xy)âŠ‘Â¨2â†‘u) - (xyâŠ‘Â¨2â†‘u)
    xywÃ— +Â´zwÃ—{conâŠ‘Ëœ+Â´âˆ¨` (ğ•©â‰¥s)âˆ§ğ•©<e}Â¨ zi
    # +Â´{conâŠ‘Ëœ+Â´âˆ¨` (ğ•©â‰¥s)âˆ§ğ•©<e}Â¨ zi
  }Â¨ â¥Šâ†•szxâ€¿szy-1
}


â€¢Show Do {âŸ¨vâ‹„sâ€¿eâŸ©: âˆ§Â´ (sâ‰¥Â¯50)âˆ§eâ‰¤50}Â¨âŠ¸/ l
â€¢Show Do l