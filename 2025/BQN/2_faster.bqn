#!/usr/bin/env bqn
âŸ¨Ints, Split, InputâŸ© â† â€¢Import "../../utils/utils.bqn"
l â† IntsÂ¨','Split âŠ‘â€¢FLines 2025â€¿2 Input â€¢args

max â† âŒˆ10â‹†â¼2+âŒˆÂ´âˆ¾l

all â† { ğ•Š l: # for each necessary number length:
  ds â† (0=|âŸœğ•©)âŠ¸/ â†•l # divisors (excl. self)
  ps â† { ğ•Š k: # for each divisor:
    r â† {ğ•©+â†•9Ã—ğ•©} 10â‹†k-1 # e.g. for k=3: 100â€¦999
    rÃ—â†© +Â´ 10â‹† kÃ— â†•lÃ·k  # multiply by e.g. 100100100100 to get length-l numbers
  }Â¨ ds
  (2âˆ¾Ëœ2â‰ lÃ·ds) âŠ” ps # group by whether number is repeated twice
}Â¨ 1+â†•max

ps â† âˆ¾âˆ˜âˆ¾Â¨ <Ë˜â‰> all # âŸ¨all 2x-repeated invalid IDs â‹„ â‰¥3x-repeated IDsâŸ©
ps âˆ§âŒ¾(1âŠ¸âŠ‘)â†© # sort the â‰¥3x-repeated IDs (2x-repeated is already sorted)
i2â€¿ir â† {ğ•Ša: âˆ¾{sâ€¿eâ†aâ‹ğ•© â‹„ sâ†“eâ†‘a}Â¨ l}Â¨ ps # binary-search the input in the invalid IDs & slice them
â€¢Show p1 â† +Â´i2 # 2x-repeated doesn't have duplicates
â€¢Show p1+Â´ â· Â¬âˆ˜âˆŠâŸœi2âŠ¸/ ir # clean up â‰¥3x duplicates
