#!/usr/bin/env bqn
âŸ¨BrailleDisplay, Ints, InputâŸ© â† â€¢Import "../../utils/utils.bqn"
l0 â† IntsÂ¨ â€¢FLines 2025â€¿9 Input â€¢args
t â† <Ë˜â‰> l0
â€¢Show âŒˆÂ´ (â†•â‰ l0) {âŒˆÂ´ Ã—Â´ |1+ (ğ•¨â†‘Â¨t)-ğ•©}Â¨ l0

ul â† {{1â†“â¥Šğ•©â‰Ë˜Ëœs+âŒŠ0.5Ã—ğ•©-sâ†Â»ğ•©}âˆ§â·ğ•©}Â¨ t # unique coordinates, plus intermediates to not let flood-fill cross points outside
# ul â† âˆ§âˆ˜â·Â¨t

upt â† ulâŠÂ¨t
up â† <Ë˜â‰> upt
p â† âˆ¾ (âŠ¢ {(<ğ•¨âŒŠğ•©)+â¥Šâ†•1+|ğ•¨-ğ•©}Â¨ 1âŒ½âŠ¢) up
m â† 1Â¨âŒ¾(pâŠ¸âŠ‘) 0â¥ŠËœ1+âŒˆÂ´Â¨upt

{
  n â† m < âˆ¨Â´âŸ¨ğ•©,Â»ğ•©,Â«ğ•©,Â»Ë˜ğ•©,Â«Ë˜ğ•©âŸ©
  nâ‰¢ğ•©? mâˆ¨â†©n â‹„ n;
  @
}â€¢_while_(@âŠ¸â‰¢) 1âŒ¾((âŒŠ0.4â€¿0.4Ã—â‰ Â¨ul)âŠ¸âŠ‘) 0Â¨m # flood-fill starting at some manually-picked position

# â€¢OutË˜ BrailleDisplay m

m <Ë˜â†©
mx â† 0
# best â† @
{
  >Â´âŠ‘Â¨ğ•¨â€¿ğ•©?@;
  âŸ¨y0,x0âŸ©ğ•ŠâŸ¨y1,x1âŸ©:
    # p0 â† ğ•¨â‹ˆğ•©
    x0â€¿x1 âˆ§â†©
    y1â€¿x1+â†©1
    sz â† Ã—Â´1+| (ğ•¨â‹ˆÂ¨ğ•©) (-Â´âŠ)Â¨ ul
    
    ok â† âˆ§Â´ {âˆ§Â´x0â†“x1â†‘ğ•©}Â¨ y0â†“y1â†‘m
    # d â† x1-x0 â‹„ ok â† âˆ§Â´ {dâ‰¤âŠ‘0âŠËœx0â†“ğ•©}Â¨ y0â†“y1â†‘m # alternative way of doing the above
    
    # {ğ•Š:bestâ†©âˆ§âŒ¾(1âŠ¸âŠ‘Â¨)p0}âŸâŠ¢mx<okÃ—sz
    mxâŒˆâ†©okÃ—sz
}âŒœËœ up
â€¢Show mx

# m â†© 2âŠ¸+âŒ¾((â¥Š(<âŠ‘best)+â†•Â¬ËœÂ´best)âŠ¸âŠ‘) >m
# â€¢Show mâŠ"Â·#?âŒ·"

# â€¢Show âŠâŸœ"Â·#?âŒ·" mâŠËœ ulâ‹Â¨ âŒŠ(âŒˆÂ´Â¨t)Ã— <(â†•Ã·âŠ¢)100
