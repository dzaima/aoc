#!/usr/bin/env bqn
âŸ¨Input, CountâŸ© â† â€¢Import "../../utils/utils.bqn"
bs â† â€¢file.MapBytes 2024â€¿1 Input â€¢args

Re â† {aâ€¿bğ•Šğ•©: bÂ¨âŒ¾((a=ğ•©)âŠ¸/)ğ•©}
nw â† 0.5Ã—1+âŠ‘bsâŠ@+10          # half of the width of a line (we assume all numbers are equal-width)
nums â† 0âŒˆ '0'-Ëœ âˆ˜â€¿nwâ¥Šbs      # (A) reshape into an nÃ—nw matrix, subtract '0', max(0, that)
cols â† âŒ½ Â¯1â†“<Ë˜â‰ nums         # (B) transpose, split into rows, drop last one (all spaces/newlines), reverse
aâ€¿b â† <Ë˜â‰ âˆ˜â€¿2â¥Š 10âŠ¸Ã—âŠ¸+ËœÂ´ cols # (C) a+10Ã—b-reduce, split apart the two columns
a â†© â€¢internal.Squeeze aÃ—Ã·10  # (D) the first column was shifted one to the right; divide by 10 (multiply by 1Ã·10) to shift it back (squeeze to convert to ints, as float multiply doesn't bother)

# 12345Â·Â·Â·67890â†©
# 54321Â·Â·Â·98765â†©
# â†“ (A)
# 1234500
# 0678900
# 5432100
# 0987650
# â†“ (B)
# 0005
# 5916
# 3738
# 4827
# 2649
# 1050
# â†“ (C)
# âŸ¨âŸ¨123450,543210âŸ©, âŸ¨67890,98765âŸ©âŸ©
# â†“ (D)
# âŸ¨âŸ¨12345,54321âŸ©, âŸ¨67890,98765âŸ©âŸ©


aâ€¿b âˆ§Â¨â†©             # sort both columns
â€¢Show +Â´ |a-b       # sum of absolute differences
â€¢Show +Â´ aÃ— a âŠ /â¼b # indices-inverse (i.e. histogram) column b, select from that by column a, multiply, sum
# better for larger numbers, but slower for the input:
# +Â´ aÃ— a Count b
