#!/usr/bin/env bqn
âŸ¨Input, CountâŸ© â† â€¢Import "../../utils/utils.bqn"
bs â† â€¢file.MapBytes 2024â€¿1 Input â€¢args

lw â† 1+âŠ‘bsâŠ@+10       # line width; 14 for input
nw â† Â¯2+lwÃ·2          # number width; 5 for input
si â† (âŠ¢âˆ¾(3+nw)âŠ¸+) â†•nw # indices to pick out from each row; 0â€¿1â€¿2â€¿3â€¿4â€¿8â€¿9â€¿10â€¿11â€¿12 for input

nums â† âˆ˜â€¿nwâ¥Š siâŠ¸âŠË˜ âˆ˜â€¿lwâ¥Š bs    # (A) select by the indices (reshaping to n by lw matrix beforehand, and nÃ—2 by nw afterward)
digits â† âŒ½ <Ë˜ â‰ nums-'0'       # (B) subtract ASCII '0', transpose, split into list of lists, reverse that
aâ€¿b â† <Ë˜â‰âˆ˜â€¿2â¥Š {ğ•¨+10Ã—ğ•©}Â´ digits # (C) a+10Ã—b-reduce, split into the two columns via reshape & transpose

# 12345Â·Â·Â·67890â†©54321Â·Â·Â·98765â†©
# â†“ (A)
# 12345Â·Â·Â·67890â†©
# 54321Â·Â·Â·98765â†©
# â†“ (A)
# 1234567890
# 5432198765
# â†“ (A)
# 12345
# 67890
# 54321
# 98765
# â†“ (B)
# 1659
# 2748
# 3837
# 4926
# 5015
# â†“ (C)
# âŸ¨12345,67890,54321,98765âŸ©
# â†“ (C)
# âŸ¨âŸ¨12345,54321âŸ©, âŸ¨67890,98765âŸ©âŸ©

aâ€¿b âˆ§Â¨â†©           # sort both columns
â€¢Show +Â´ |a-b     # sum of absolute differences
h â† (1+âŒˆÂ´a)â†‘/â¼b   # indices-inverse (i.e. histogram) column b
â€¢Show +Â´ aÃ— a âŠ h # select from histogram by b, multiply, sum
# better alternative to last two lines for large numbers, but slower for the â‰¤99999 inputs:
# â€¢Show +Â´ aÃ— a Count b
