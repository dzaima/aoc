#!/usr/bin/env bqn
âŸ¨RB, B10, Num, Repr, LCM, GCD, Ints, SInts, Split, SplitF, Indices, ReIndex, MDSlash, MDSlashI, Unjoin, Count, _fx_, _fi_, _underSelect_, Select, Tr, TW, _memo, InputâŸ© â† â€¢Import "../../utils/utils.bqn"
aâ€¿b â† âŸ¨âŸ©SplitF â€¢FLines 2024â€¿24 Input â€¢args

a {Â¯1âŠ¸â†“âŒ¾âŠ‘' 'Splitğ•©}Â¨â†©
b {0â€¿1â€¿2â€¿4âŠ' 'Splitğ•©}Â¨â†©

swaps â† âŸ¨
  # part 2 done by manually adding entries here until the various prints at the bottom got more uniform
âŸ©
swapMap â† â€¢HashMapÂ´ <Ë˜â‰âˆ˜â€¿2â¥Š>(âŠ¢âˆ¾âŒ½Â¨) swaps

b0 â† b
b {ğ•© swapMap.Get ğ•©}âŒ¾(3âŠ¸âŠ‘)Â¨â†©
# â€¢Show (b0â‰¢Â¨b)/b0
# â€¢Exit 1

b {âˆ§âŒ¾(0â€¿2âŠ¸âŠ) ğ•©}Â¨â†©
b âˆ§â†©

bm â† (3âŠ‘Â¨b)â€¢HashMap b

m â† â€¢HashMapÂ´"1"âŠ¸â‰¡Â¨âŒ¾(1âŠ¸âŠ‘) <Ë˜â‰>a
l â† âŸ¨âŸ©
Get â† {
  @â‰¢râ†@m.Get ğ•©? r;
  aâ€¿bâ€¿câ€¿d â† bm.Get ğ•©
  r â† ({"XOR":â‰ ;"OR":âˆ¨;"AND":âˆ§}b)Â´ GetÂ¨ aâ€¿c
  lâˆ¾â†©<ğ•©
  r âŠ£ ğ•© m.Set r
}

â€¢Show +Â´{ğ•©Ã—2â‹†â†•â‰ ğ•©} GetÂ¨ âˆ§('z'=âŠ‘Â¨)âŠ¸/ â·3âŠ‘Â¨b

# {
#   xâ€¿yâ†<Ë˜2â€¿âˆ˜â¥ŠâŠ‘Â¨a
#   bm0 â† (â·0âŠ‘Â¨b) â€¢HashMap (âŠ0âŠ‘Â¨b)âŠ”b
#   bm1 â† (â·2âŠ‘Â¨b) â€¢HashMap (âŠ2âŠ‘Â¨b)âŠ”b
#   Uses â† {(@ bm1.Get ğ•©)bm0.Get ğ•©}
#   â€¢Show >{{â‰¡Â´1â†“Â¨0â€¿2âŠğ•©}Â¨ ğ•©}Â¨ bm0.Getâˆ˜â€¢ShowÂ¨ x
#   â€¢Show >{ğ•©â‹ˆâˆ§âŒ¾(âŒ½Â¨)Uses 3âŠ‘ğ•©}Â¨1âŠ‘Â¨1â†“UsesÂ¨ x
# }
# â€¢Show >bm.GetÂ¨ ('z'=âŠ‘Â¨l)/l
# # pn â† lâ€¢HashMap l{âŠ‘(âŠ‘ğ•¨)âˆŠ"xyz"? ğ•¨; 'I'âˆ¾"000"Â«Ëœâ€¢Repr ğ•©}Â¨ â†•â‰ l
# # â€¢Show >{ğ•©pn.Getğ•©}Â¨Â¨ bm.GetÂ¨ l

# # â€¢Show >bm.GetÂ¨ l
â€¢Show 1â†“âˆ¾','âˆ¾Â¨âˆ§âˆ¾swaps