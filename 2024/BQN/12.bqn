#!/usr/bin/env bqn
⟨Input⟩ ← •Import "../../utils/utils.bqn"
l ← >•FLines 2024‿12 Input •args

visited ← 0¨ l
p1 ← 0
p2 ← 0
shifts ← ⟨»˘,«˘,«,»⟩
{
  𝕩⊑visited? 1;
  lc ← 𝕩⊑l
  c ← 1⌾(𝕩⊸⊑) 0¨l
  {
    ps ← (lc=⊑⟜l)¨⊸/ (¬⊑⟜c)¨⊸/ (∧´≥⟜0∧<⟜(≠l))¨⊸/ ⍷ ⥊𝕩 +⌜ ⟨¯1‿0,1‿0,0‿1,0‿¯1⟩
    c 1¨⌾(ps⊸⊑)↩
    ps
  }•_while_(×≠) ⋈𝕩
  area ← +´⥊c
  p1+↩ area × +´ {+´⥊ c ∧ ¬ 𝕏 c}¨ shifts
  p2+↩ area × +´ (2⌽shifts) {+´⥊ (⊢∧·¬𝕎) c ∧ ¬ 𝕏 c}¨ shifts
  visited∨↩ c
}¨ ↕≢l
•Show p1
•Show p2