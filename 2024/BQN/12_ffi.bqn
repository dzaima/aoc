#!/usr/bin/env bqn
âŸ¨Input, _fx_âŸ© â† â€¢Import "../../utils/utils.bqn"
l â† >â€¢FLines 2024â€¿12 Input â€¢args

is0 â† {{ğ•© +â‰1 Â»+`1+Â¯1âŠğ•©}Â»+`ğ•©â‰ Â«ğ•©}{âŸ¨ğ”½ğ•©, ğ”½âŒ¾â‰ğ•©âŸ©} l

gm â† 1+âŒˆÂ´ âŒˆÂ´âˆ˜â¥ŠÂ¨ is0

minFFI â† "lib12.so" â€¢FFI "&"â€¿"group_min_i16"â€¿"&i16"â€¿"*i16"â€¿"*i16"â€¿"u64"
sumFFI â† "lib12.so" â€¢FFI "&"â€¿"group_sum_i8_i16"â€¿"&i16"â€¿"*i16"â€¿"*i8"â€¿"u64"
GroupMin â† {MinFFI âŸ¨gmâ¥Š32767, ğ•¨, ğ•©, â‰ â¥Šğ•¨âŸ©}
GroupSum â† {SumFFI âŸ¨0â¥ŠËœ1+âŒˆÂ´â¥Šğ•¨, ğ•¨, ğ•©, â‰ â¥Šğ•¨âŸ©}
# GroupMin â† âŒŠÂ´Â¨âŠ”â—‹â¥Š
# GroupSum â† +Â´Â¨ âŠ”â—‹â¥Š

is â† âŠâŒ¾â¥Š âŠ‘ (âŠ¢ â‹ˆ âŠ£âŠGroupMin)Â´â€¢_while_(â‰¢Â´) is0
# â€¢Show z

shifts â† âŸ¨Â»Ë˜,Â»,Â«Ë˜,Â«âŸ©
isp â† is+1 # so that Nudge shifting in zeroes doesn't collide with index 0
shs â† {ğ•isp}Â¨ shifts
edges â† ispâŠ¸â‰ Â¨ shs

areas â† /â¼â¥Šis
â€¢Show +Â´ areas Ã— is GroupSum +Â´edges
â€¢Show +Â´ areas Ã— is GroupSum +Â´edges âˆ§ (Â¯1âŒ½edges) âˆ¨ (Â¯1âŒ½shifts) {isp=ğ•ğ•©}Â¨ shs
# TODO: remove â—‹â¥Š from âŠ”s when CBQN does that fast
