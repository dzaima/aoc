#!/usr/bin/env cbqn
âŸ¨NumâŸ© â† â€¢Import "../../utils/utils.bqn"
l â† â€¢FLines â‰ â—¶"8.in"â€¿âŠ‘ â€¢args

ins0â€¿arg0 â† <Ë˜â‰>{âŸ¨3â†‘ğ•©, -âŸ('-'=4âŠ‘ğ•©) Num 5â†“ğ•©âŸ©}Â¨ l
ins0 âŠËœâ†© "nop"â€¿"acc"â€¿"jmp"

Eval â† { insâ€¿arg:
  { prevâ€¿accâ€¿pc:
    {
      âŠ‘pcâˆŠprev? accâ€¿pc;
      pcâ‰¥â‰ ins? {pcâ‰¡â‰ ins? â‹ˆacc; accâ€¿pc};
      prevâˆ¾â†© pc
      argv â† pcâŠ‘arg
      âŠ¢â—¶âŸ¨
        {ğ•Š: âŸ¨prev, acc, pc+1âŸ©}
        {ğ•Š: âŸ¨prev, acc+argv, pc+1âŸ©}
        {ğ•Š: âŸ¨prev, acc, pc+argvâŸ©}
      âŸ© pcâŠ‘ins
    }
  }â€¢_while_{3â‰¡â‰ ğ•©} âŸ¨âŸ©â€¿0â€¿0
}

â€¢Show âŠ‘ {!2=â‰ ğ•©â‹„ğ•©} Eval ins0â€¿arg0

â€¢Show â‹ˆâ¼ â‹ˆâ¼ (1=â‰ Â¨)âŠ¸/ {
  Eval âŸ¨2âŠ¸-âŒ¾(ğ•©âŠ¸âŠ‘) ins0, arg0âŸ©
}Â¨ /ins0âˆŠ0â€¿2