#!/usr/bin/env cbqn
âŸ¨Num, SplitFâŸ© â† â€¢Import "../../utils/utils.bqn"
cards â† NumÂ¨Â¨ 1â†“Â¨ âŸ¨âŸ© SplitF â€¢FLines â‰ â—¶"22.in"â€¿âŠ‘ â€¢args

P1 â† {
  c â† âŠ‘Â¨ğ•©
  w â† <Â´c
  âˆ¾âŸœ(âŒ½âŸw c)âŒ¾(wâŠ¸âŠ‘) 1â†“Â¨ ğ•©
}

Score â† {+Â´ (âŒ½Ã—1+â†•âˆ˜â‰ ) âˆ¾ğ•©}

â€¢Show Score P1â€¢_while_{âˆ§Â´0<â‰ Â¨ğ•©} cards

Round â† {
  c â† âŠ‘Â¨ ğ•©
  wâ†{
    âˆ§Â´c<â‰ Â¨ğ•©? # recurse
      <Â´ â‰ Â¨ Game câ†‘Â¨ 1â†“Â¨ğ•©
    ; # don't recurse
      <Â´ c
  }ğ•©
  âˆ¾âŸœ(âŒ½âŸw c)âŒ¾(wâŠ¸âŠ‘) 1â†“Â¨ ğ•©
}

# Hash â† âŠ¢ â‹„ In â† {ğ•¨âŠ¸â‰¡Â¨ ğ•©}
Hash â† 1e9âŠ¸Ã—âŠ¸+Â´â€¢Hash â‹„ In â† = # TODO hashmap

ent â† â€¢MonoTime@
enn â† 0

Game â† HashâŠ¸{
  p â† â‹ˆğ•¨
  r â† {
    n â† Round ğ•©
    nh â† Hash n
    Â¬âˆ¨Â´nh In p? # not encountered yet
      pâˆ¾â†© <nh
      n
    ; # encountered before
      âŸ¨âŸ¨1âŸ©,âŸ¨âŸ©âŸ©
  }â€¢_while_{âˆ§Â´0<â‰ Â¨ğ•©} ğ•©
  r
}
â€¢Show Score Game cards