#!/usr/bin/env cbqn
âŸ¨IntsâŸ© â† â€¢Import "utils.bqn"
l â† 1â†“Â¨ IntsÂ¨ â€¢FLines â‰ â—¶"19.in"â€¿âŠ‘ â€¢args

Try â† { minsMaxâ€¿splitPosğ•Šaâ€¿bâ€¿câ€¿dâ€¿eâ€¿f:
  cs â† âŸ¨
    aâ€¿0â€¿0â€¿0
    bâ€¿0â€¿0â€¿0
    câ€¿dâ€¿0â€¿0
    eâ€¿0â€¿fâ€¿0
  âŸ©
  cm â† 0<cs
  
  Div â† {â€¢internal.Squeeze (2Ã—minsMax)âŒŠâŒˆ(0âŒˆğ•¨)Ã·ğ•©}
  
  max â† 0
  # totâ†0 â‹„ spliâ†0
  maxRs â† minsMaxâŒ¾(3âŠ¸âŠ‘) âŒˆÂ´cs
  Sep â† {âŸ¨âŠ‘ğ•©, 4â†‘1â†“ğ•©, 5â†“ğ•©âŸ©}
  Iter â† {
    0ğ•Šğ•©:
      # â€¢Out "split at "âˆ¾â€¢Repr spliâ†©â‰ âŠ‘ğ•©
      {Â¯1 Iter Sep â‹ˆÂ¨ ğ•©}Â¨ â· <Ë˜â‰> âˆ¾ â‹ˆâŒ¾âŠ‘ ğ•©;
      # l â† â· <Ë˜â‰> âˆ¾ â‹ˆâŒ¾âŠ‘ ğ•©
      # iâ†0â‹„t0â†â€¢MonoTime@
      # {
      #   (â€¢MonoTime@) {t0â†©ğ•¨â‹„â€¢Showğ•©}âŸ(t0<-âŸœ1) (i+â†©1)Ã·â‰ l
      #   Â¯1 Iter Sep â‹ˆÂ¨ ğ•©}Â¨ l;
    ğ•¨ğ•Šleftâ€¿msâ€¿rs:
      # â€¢Show â‰ âŠ‘ms
      # tot+â†©â‰ âŠ‘ms
      nt â† 1+âŒˆÂ´Â¨ ((cm/Â¨cs)-cm/Â¨<ms) DivÂ¨Â¨ cm/Â¨<rs
      m â† (rsâ‰¤maxRs) âˆ§ nt<<left
      none â† Â¬âˆ¨Â´m
      maxâŒˆÂ´â†© (none/3âŠ‘ms) + (none/left)Ã—(none/3âŠ‘rs)
      Â¬âˆ§Â´none?
        (ğ•¨-1) ğ•Š Sep âˆ¾Â¨ <Ë˜ â‰>{
          cm â† ğ•©âŠ‘m
          fdtâ†cm/ğ•©âŠ‘nt
          fmsâ†(<cm)/Â¨ms
          frsâ†(<cm)/Â¨rs
          âˆ¾âŸ¨âŸ¨(cm/left)-fdtâŸ©, fms + ((<fdt)Ã—frs) -ËœâŸ(0â‰ âŠ£)ËœÂ¨ ğ•©âŠ‘cs, 1âŠ¸+âŒ¾(ğ•©âŠ¸âŠ‘) frsâŸ©
        }Â¨ â†•4
      @;@
  }
  
  splitPos Iter âŸ¨âŸ¨minsMaxâŸ©, â‹ˆÂ¨4â¥Š0, â‹ˆÂ¨1â€¿0â€¿0â€¿0âŸ©
  # â€¢Out "tot: "âˆ¾(â€¢Repr tot)âˆ¾"; avg "âˆ¾â€¢Repr totÃ·spli
  max
}

â€¢Show +Â´ (âŠ¢Ã—1+â†•âˆ˜â‰ ) (24â€¿4âŠ¸Try)Â¨ l
â€¢Show Ã—Â´32â€¿12âŠ¸TryÂ¨ (3âŒŠâ‰ )âŠ¸â†‘ l