#!/usr/bin/env cbqn
⟨Ints⟩ ← •Import "utils.bqn"
i ← ∾{2↕∘‿2⥊𝕩}∘Ints¨•FLines ≠◶"14.in"‿⊑ •args

Set1 ← {𝕨 1⌾((+´𝕩×1«≢𝕨)⊑⥊)↩}

Run ← {
  min ← ¯1+0⊸⌊⌾(1⊸⊑) ⌊˝∾˝𝕩
  l ← -⎉1⟜min 𝕩
  max ← ⌈˝∾˝l
  b ← ⍉ ∊⟜(∾{(<⊏𝕩)+⥊(<∘××·↕1+|)-˝⌽𝕩}¨ <˘l)⌾⥊ ↕2+max
  lx ← ¯1+≠⊏b
  ly ← ¯1+≠b
  
  res ← 0
  Fill ← {
    𝕩⊑b? 1;
    𝕊 y‿x: {
      (ly=y+1)∨(x=0)∨x=lx? 0;
      Fill ⟨y+1, x⟩?
      Fill ⟨y+1, x-1⟩?
      Fill ⟨y+1, x+1⟩?
        res+↩ 1
        b Set1↩ 𝕩
        1;
      0
    }𝕩
  }
  Fill ⌽500‿0-min
  •Show res
}

Run i
ji ← 500‿0∾∾˝i
max ← ⌈˝ji
min ← ⌊˝ji
by ← 2+1⊑max
i2 ← i∾ [⟨by-˜⊑min, by⟩, ⟨by+⊑max, by⟩]
Run i2