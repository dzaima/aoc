#!/usr/bin/env bqn
âŸ¨InputâŸ© â† â€¢Import "../../utils/utils.bqn"
l â† â€¢file.MapBytes 2023â€¿1 Input â€¢args
# l â† â€¢file.MapBytes "../inputs/gen/1_10MB.in"
{l â†© â€¢file.MapBytes âŠ‘ğ•©}âŸâ‰  â€¢args
! (@+10) = Â¯1âŠ‘l

_chunkByTo_ â† { F _ğ•£_ charâ€¿tgt raw:
  {minâ€¿max: F minâ†“maxâ†‘raw}Â¨ <Ë˜ 2â†•â· (â‰ raw)âˆ¾Ëœ 0âˆ¾ {
    ğ•© + 1+âŠ‘ (ğ•©â†“raw) âŠ char # fast due to slices & short-circuit
  }Â¨ tgtÃ—â†•âŒˆ(â‰ ğ•©)Ã·tgt
}

names â† "one"â€¿"two"â€¿"three"â€¿"four"â€¿"five"â€¿"six"â€¿"seven"â€¿"eight"â€¿"nine"-@

kmap â† âˆ¾1â†‘Â¨âŠ”16| +Â´Â¨ 2â†‘Â¨ 1â†“Â¨ names
c0â€¿c1â€¿c2â€¿c3â€¿c4 â† <Ë˜â‰>5â†‘Â¨ âŠ‘âŸœnamesÂ¨ kmap
mults â† kmap âŠ (49+â†•9) - âŠ‘Â¨names


part1 â† 0
part2 â† 0

FirstLast â† {
  ğ•© â‰¤âŸœ('9'-@)âŠ¸/â†©
  nls â† ğ•©=10
  d0 â† (1Â»nls) / ğ•©
  d1 â† (1Â«Â¯1â†“nls) / Â¯1â†“ğ•©
  ((+Â´d1) + 10 Ã— +Â´d0) - 528Ã—â‰ d0
}


{
  ğ•© 8â€¿8â€¢bit._castâ†©
  part1+â†© FirstLast ğ•©
  
  sh1 â† 0Â«ğ•©
  sh2 â† 0â€¿0Â«ğ•©
  key â† 16|sh1+sh2
  m â†             (keyâŠc0) = ğ•©
  mâˆ§â†©             (keyâŠc1) = sh1
  mâˆ§â†©             (keyâŠc2) = sh2
  mâˆ§â†© (t3=0) âˆ¨ (t3â†keyâŠc3) = 0â€¿0â€¿0Â«ğ•©
  mâˆ§â†© (t4=0) âˆ¨ (t4â†keyâŠc4) = 0â€¿0â€¿0â€¿0Â«ğ•©
  ğ•©+â†© (keyâŠmults) Ã— m
  
  part2+â†© FirstLast ğ•©
  @
} {30000â‰¤â‰ ğ•©? ğ”½_chunkByTo_ âŸ¨@+10, 15000âŸ© ğ•©; ğ”½ ğ•©} l

â€¢Show part1
â€¢Show part2