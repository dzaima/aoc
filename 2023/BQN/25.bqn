#!/usr/bin/env bqn
âŸ¨Split, _fx_, InputâŸ© â† â€¢Import "../../utils/utils.bqn"
l â† ' 'SplitÂ¨ ':'âŠ¸â‰ âŠ¸/Â¨ â€¢FLines 2023â€¿25 Input â€¢args

# original was: plug into graphviz layout=neato, see two clearly separated blobs, take the names of the nodes that connect those

k â† âŠ‘Â¨l
v â† 1â†“Â¨l
un â† â·kâˆ¾âˆ¾v
kn â† â†•â‰ un
vn â† unâŠ¸âŠÂ¨ v âˆ¾ (un -â—‹â‰  v)â¥Š<âŸ¨âŸ©

vn0 â† vn
vnâˆ¾Â¨â†© (â‰ kn)â†‘ (âˆ¾vn) âŠ” (â‰ Â¨vn)/kn

m â† â‰âŠ¸âˆ¨ (â‰ un)â†‘ >(â‰ un)â†‘Â¨/â¼Â¨ vn0

r â† â€¢MakeRand 38282246 # seeded to have consistent timings
es0 â† > âˆ¾vnâ‹ˆÂ¨Â¨kn
Try â† { ğ•Š:
  m â† kn â€¢HashMap â‹ˆÂ¨ kn
  remap â† kn
  {
    2â‰¥m.Count@?@;
    aâ€¿b:
    aâ€¿b âŠâŸœremap _fx_â‰¢â†©
    aâ‰¢b?
    remap bâŒ¾(aâŠ¸âŠ‘)â†©
    as â† m.Get a
    m.Delete a
    b m.Set asâˆ¾m.Get b
    ;@
  }Ë˜ r.Dealâˆ˜â‰ âŠ¸âŠ es0
  
  aâ€¿b â† m.Values@
  {
    3 = +Â´âˆ§Â´ aâ€¿b âˆŠËœÂ¨ <Ë˜ â‰es0? â‰ Â¨ aâ€¿b;
    @
  }
}

â€¢Show Ã—Â´ Tryâ€¢_while_{@â‰¡ğ•©} @