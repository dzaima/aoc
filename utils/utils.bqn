# âŸ¨RB, B10, Num, Repr, LCM, GCD, Ints, SInts, Split, SplitF, ReIndex, MDSlash, MDSlashI, Unjoin, Count, _fx_, _fi_, Tr, TW, InputâŸ© â† â€¢Import "../../utils/utils.bqn"
RB â‡ 2âŠ¸Ã—âŠ¸+ËœÂ´âŒ½
B10 â‡ 10âŠ¸Ã—âŠ¸+ËœÂ´âŒ½
Num â‡ â€¢ParseFloat
Repr â‡ {ğ•©<1e10? â€¢Reprğ•©; âˆ¾{Â¯10â†‘ğ•©âˆ¾Ëœ10â¥Š'0'}âŒ¾(1âŠ¸âŠ‘) â€¢ReprÂ¨ 1e10(âŒŠâˆ˜Ã·Ëœâ‹ˆ|)ğ•©}

LCM â‡ â€¢math.LCM
GCD â‡ â€¢math.GCD

Ints â‡ {â€¢ParseFloatÂ¨((Â¯1+âŠ¢Ã—Â·+`Â»âŠ¸<)ğ•©âˆŠ'0'+â†•10)âŠ”ğ•©}
SInts â‡ {â€¢ParseFloatÂ¨((Â¯1+âŠ¢Ã—Â·+`Â»âŠ¸<)ğ•©âˆŠ'-'âˆ¾'0'+â†•10)âŠ”ğ•©}

Split â‡ {((Â¯1+âŠ¢Ã—Â·+`Â»âŠ¸<)Â¬ğ•©=ğ•¨)âŠ”ğ•©}
SplitF â‡ {((Â¯1+âŠ¢Ã—Â·+`Â»âŠ¸<)Â¬ğ•¨âŠ¸â‰¡Â¨ğ•©)âŠ”ğ•©}

ReIndex â‡ {<Ë˜ğ•¨|â‰1âŒŠğ•©Ã·âŒœ1Â«Ã—`âŒ¾âŒ½ğ•¨} # convert indices into a shape-âŸ¨Ã—Â´ğ•¨âŸ© array into corresponding indices into a shape-ğ•¨ one
MDSlash â‡ {(0.13Ã—â‰ â¥Šğ•©)>+Â´â¥Šğ•©? (â‰¢ğ•©) ReIndex /â¥Šğ•©; /â—‹â¥ŠâŸœâ†•âŸœâ‰¢ ğ•©} # multi-dimensional /ğ•©
MDSlashI â‡ {<Ë˜â‰> MDSlash ğ•©} # MDSlash but transposed output

Unjoin â‡ {((â‰ Â¨ğ•¨)/â†•â‰ ğ•¨) âŠ” ğ•©}

Count â‡ âŠËœâˆ˜âŠ£âŠ â‰ âˆ˜âŠ£â†‘ /â¼âˆ˜âŠ

_fx_ â‡ {F _ğ•£_ ğ”¾ ğ•©: âŠ‘{pâ€¿n:nâ‹ˆF n}â€¢_while_(ğ”¾Â´) ğ•©â‹ˆğ”½ğ•©} # fixed-point
_fi_ â‡ {F _ğ•£_ ğ”¾ ğ•©: Â¯1â†“{ğ•©âˆ¾<F Â¯1âŠ‘ğ•©}â€¢_while_(ğ”¾Â´Â¯2â†‘âŠ¢) ğ•©â‹ˆğ”½ğ•©} # fixed-point with immediates

Tr â‡ { # depth-transpose
  1â‰¡=ğ•©? <â‰1â‰>ğ•©;
  1â‰¡=âŠ‘ğ•©? <Ë˜â‰â¼>ğ•©;
  =âŠ¸{<â‰ğ•¨â‰âŸğ•¨>ğ•©} ğ•©
}
TW â‡ { # transposed depth-separated ğ•¨â†•arr
  1=â‰ ğ•¨? (ğ•¨Â¬Ëœâ‰ ğ•©)â†‘Â¨â†“âŸœğ•©Â¨â†•ğ•¨;
  <â‰(â‰ ğ•¨) ((â‰¢ğ•©)-ğ•¨-1) â†• ğ•©
}

base â† â€¢file.At "../"
Input â‡ {Â· ğ•Š âŸ¨pathâŸ©: path; yâ€¿d ğ•Š âŸ¨âŸ©: âˆ¾âŸ¨base, â€¢Repr y, "/inputs/", â€¢Repr d, ".txt"âŸ©}